{{#> index title="Files"}}
<div>
<div class="bg-crust flex justify-center">
    <div class="w-2/3">
        <div class="flex flex-wrap justify-between">
            <form method="post" 
                action="/api/upload/{{current}}" 
                enctype="multipart/form-data" 
                class="flex flex-row m-1 ">
                <input type="file" name="file" id="file" class="max-w-md"></input>
                <button type="submit">UPLOAD</button>
            </form>
            <form method="post" action="/api/create_folder/{{current}}" class="flex flex-row m-1">
                <input type="text" name="folder_name" placeholder="New Folder..."></input>
                <button type="submit">CREAT FOLDER</button>
            </form>
        </div>
    </div>
</div>
<div class="flex justify-center">
    <div class="w-2/3">
        <h3 class="my-2">Current Path: /{{current}}</h3>
        <div class="flex flex-col">
            {{#each dir_content}}
            <div class="flex flex-row justify-between">
                <p onclick="window.location.href='/files/{{this.path}}'" class="text-blue my-auto cursor-pointer">{{this.name}}</p>
                {{#if this.is_dir}}
                    <p class="text-peach my-auto">DIR</p>
                {{/if}}
                <form method="post" action="/api/remove/{{this.path}}">
                    <button type="submit" class="text-red">DEL</button>
                </form>
            </div>
            <div class="w-[95%] h-[3px] bg-overlay0 my-1"></div>
            {{/each}}
        </div>
        {{#if parrent_dir_path}}
            <button onclick="window.location.href='{{parrent_dir_path}}'">GO BACK</button>
        {{/if}}
        {{#if error_block}}
            {{> partials/error error=error_block}}
        {{/if}}
    <button onclick="window.location.href='/'" class="mt-4">BACK HOME</button>
    </div>
</div>
</div>
{{/index}}